define("etsy.storque-ticker",["jquery"],function(t){var e=function(e,i,n){this.options=t.extend({api_path:"/api/v2/ajax/storque/articles",per_panel:2,fx_delay:200,template:"storque_template"},n||{}),this.element=t(e),this.navigation=t(i),this.panel=0,this._initialize()};return e.prototype={_getArticles:function(){var e=this;t.ajax({url:this.options.api_path,error:function(){e._handleError.call(e)},success:function(t){e._processArticles.call(e,t)},dataType:"json"})},_processArticles:function(e){if(2>e.count)return this._handleError();var i=this.options.template,n=t.map(e.results,function(t){return Etsy.template(i,t)});this._createPanels(n),this._showPanel()},_createPanels:function(e){for(this._panels=[];e.length>0;){var i=e.splice(0,this.options.per_panel).join(""),n=t('<div class="wrap clear" />').html(i);n.find(">*:last").addClass("last"),this._panels.push(n)}},_showPanel:function(t){if(!this._animating){this.panel+=t||0,0>this.panel?this.panel=this._panels.length-1:this.panel==this._panels.length&&(this.panel=0);var e=this._panels[this.panel].clone();return t?(this._swipePanel(e,t),void 0):(this.element.empty().append(e),this._updateNavigation())}},_swipePanel:function(t,e){var i=this,n=this.element.find(".wrap"),r=n.width(),s=-1*e*r;this._animating=!0,t.css("left",e*r).appendTo(this.element),n.animate({delay:1},250),n.animate({left:s},{queue:!1,duration:this.options.fx_delay}),t.animate({left:0},{queue:!1,duration:this.options.fx_delay,easing:"swing",complete:function(){n.remove(),i._animating=!1,i._updateNavigation.call(i)}})},_updateNavigation:function(){this.navigation.show()},_handleError:function(){},_initialize:function(){var e=this;this._animating=!1,this.navigation.find("a").bind("click",function(i){i.preventDefault();var n=t(this).blur().attr("direction");e._showPanel.call(e,Number(n))}),this._getArticles(),this._initialize=null}},e});