(function(t,e){e.YourTasteModule=function(e,i,n,s,r,a){var o=this;this.options=t.extend({completion_id:s,recommendation_offset:r,carousel_down:n,carousel_across:i},a||{}),this.element_selector=e,this.element=t(e),this.scroller=new Scroller(this.element,!1,i,n,".listing-card"),this.view_more_pending=!1,this.element.bind("LAST_PAGE",null,function(){o._viewMore("APPEND")}),this._initialize()},e.YourTasteModule.prototype={_viewMore:function(){this.view_more_pending=!0;var e=this;this.scroller.toggleLoadingNext(!0);var i=this.options.carousel_across*this.options.carousel_down,n="/api/v2/ajax/tastetest/completions?completion_id="+encodeURIComponent(this.options.completion_id);n+="&offset="+this.options.recommendation_offset+"&page_size="+i+"&sticky=true&cycle=true&links_in_new_tab=false",t.ajax({url:n,type:"GET",dataType:"json",success:function(i){e.view_more_pending=!1,e.scroller.toggleLoadingNext(!1),t("#tt-module ul.listings").append(i.results.recommendations_html),e.options.recommendation_offset=i.results.new_offset,e.scroller.update()}})},_initialize:function(){this.scroller.update(),this._initialize=null,t(".remove-taste-test-module").click(function(){t("#tt-module").hide();var e="/tastetest/hide";t.ajax({url:e,type:"POST",data:{_nnc:Etsy.csrf_nonce},dataType:"json"})})}}})(jQuery,window.Etsy),window.Etsy.loader.loaded("etsy.your_taste.20130816141227.js"),function(t,e){e.RecentlyViewedModule=function(e,i,n,s,r){var a=this;this.offset=i*n,this.num_remaining=i*n,this.variant=r,this.category=s,this.element=t(e),this.scroller=new Scroller(this.element,!1,i,n,".listing-card"),this.view_more_pending=!1,this.element.bind("LAST_PAGE",null,function(){a._viewMore()}),this._initialize()},e.RecentlyViewedModule.prototype={_viewMore:function(){if(0!==this.num_remaining){this.view_more_pending=!0;var i=this;this.scroller.toggleLoadingNext(!0);var n="/api/v2/ajax/recentlyviewed?offset="+this.offset+"&variant="+this.variant;""!=this.category&&(n+="&category="+this.category),t.ajax({url:n,type:"GET",dataType:"json",success:function(n){i.view_more_pending=!1,i.scroller.toggleLoadingNext(!1),t("#recently-viewed ul.listings").append(n.results.recommendations_html),i.offset+=n.results.num_listings,4>n.results.num_listings&&(i.num_remaining=0),i.scroller.update(),n.results.ids.length>0&&e.EventLogger.logEvent({php_event_name:"recently_viewed",listing_ids:n.results.ids,times:n.results.times})}})}},_initialize:function(){this._initialize=null}}}(window.jQuery,window.Etsy),window.Etsy.loader.loaded("etsy.recently_viewed.20130816141227.js"),function(t){Scroller=function(e,i,n,s,r,a){var o=this;this.item_selector=r,this.across=n||4,this.down=s||1,this.pos=this.across,this.elem=e,this.container=t(".scroller",this.elem),this.items=this.item_selector?this.container.find(this.item_selector):this.container.children(),this.count=this.getColumnCount(),this.prev=t(".control-previous a",e),this.next=t(".control-next a",e),this.list=t(".scroller",e),this.last_change_to_visible=Date(),this.last_get_visible_listings=null,this.last_visible_listings=null,this.log_views_event_name=a||!1,this.anim_options={},i&&(this.items.remove(),this.items.sort(function(){return[0,1][Math.round(Math.random())]}),this.list.append(this.items)),this.prev.click(function(e){return t(e.target).prop("disabled")||(e.target.blur(),o.backwards()),!1}),this.next.click(function(e){return t(e.target).prop("disabled")||(e.target.blur(),o.forwards()),!1}),this.update()},Scroller.prototype={getColumnCount:function(){return Math.max(this.across,Math.ceil(this.items.length/this.down))},forwards:function(){var t=this.across;this.pos,this.pos+t>this.count&&(t=this.count-this.pos),t>0&&(this.pos+=t,this.update())},backwards:function(){var t=this.across;t>this.pos-t&&(t=this.pos-t),t>0&&(this.pos-=t,this.update())},update:function(){var e=this;this.items=this.item_selector?this.container.find(this.item_selector):this.container.children();var i=this.items.eq(0).outerWidth(!0);this.count=this.getColumnCount(),this.container.width(this.count*i),this.container.height(Math.min(this.down,Math.ceil(this.items.length/this.across))*i),this.pos=Math.min(this.pos,this.count),this.pos=Math.max(this.pos,this.across);var n=this.pos==this.across;this.prev.prop("disabled",n),this.prev.toggleClass("disabled",n);var s=this.pos==this.count;this.next.prop("disabled",s),this.next.toggleClass("disabled",s);var r=-1*(this.pos-this.across)*i;if(this.anim_options.complete)var a=this.anim_options.custom_complete;var o=t.extend({},this.anim_options,{complete:function(t){e.visibleChanged(),e.elem.trigger("ANIM_DONE"),e.pos==e.count&&e.elem.trigger("LAST_PAGE"),a&&a(t)}});this.list.stop(!0,!0).animate({left:r},o),t(this.list).trigger("scroller.update")},toggleLoadingNext:function(t){this.next.prop("disabled",t),this.next.toggleClass("loading",t)},isEmpty:function(){return 0==this.items.length},getListingCard:function(e){return t(e).hasClass(".listing-card")?e:t("li.listing-card",e)[0]},getVisibleListings:function(){if(this.last_change_to_visible!=this.last_get_visible_listings||null==this.last_visible_listings){for(var t=[],e=0;this.down>e;e++)for(var i=e*this.count,n=Math.max(0,i+this.pos-this.across),s=Math.min(i+this.pos,this.items.length),r=n;s>r;r++){var a=this.getListingCard(this.items[r]);a&&t.push(a)}this.last_get_visible_listings=this.last_change_to_visible,this.last_visible_listings=t}return this.last_visible_listings},getVisibleListingIDs:function(){var t=this.getVisibleListings();return this.getListingIDs(t)},getVisibleListingSources:function(){for(var t=this.getVisibleListings(),e=[],i=t.length,n=0;i>n;n++){var s=this.getListingSourceForListingCard(t[n]);-1!=s&&e.push(s)}return e},getAllListingIDs:function(){return this.getListingIDs(this.items)},getListingIDs:function(t){for(var e=[],i=t.length,n=0;i>n;n++){var s=this.getListingCard(t[n]);if(s){var r=this.getListingIDForListingCard(s);-1!=r&&e.push(r)}}return e},getListingIDForListingCard:function(e){if(e){var i=t(e).attr("id");if(i)return parseInt(i.substring(3),10)}return-1},getListingSourceForListingCard:function(e){if(e){var i=t(e).find("a.listing-thumb")[0];if(i){var n=t(i).attr("href");if(n){var s=/src=(\w+)&?/,r=n.match(s);return r[1]}}}},getIndexOfListing:function(t){for(var e=0;this.items.length>e;e++){var i=this.getListingCard(this.items[e]);if(i){var n=this.getListingIDForListingCard(i);if(n==t)return e}}return-1},add:function(e,i,n){i&&this.items.length>i?t(this.items[i]).after(e):this.container.append(e),n&&this.update(),this.visibleChanged()},replace:function(e,i){var n=t(this.items[e]);return n?(n=n.replaceWith(i),this.visibleChanged(),n):void 0},visibleChanged:function(){this.last_change_to_visible=new Date,this.log_views_event_name&&Etsy.EventLogger.logEvent({php_event_name:this.log_views_event_name,listing_ids:this.getVisibleListingIDs(),page:this.pos/this.across})},setAnimationOptions:function(t){this.anim_options=t}},t.extend(t.fn,{scroller:function(e,i,n){return this.each(function(){t(this).data("scroller",new Scroller(t(this),e,i,void 0,void 0,n))})}}),Etsy.Scroller=Scroller}(jQuery),window.Etsy.loader.loaded("etsy.scroller.20130816141227.js"),$(document).ready(function(){$(".listing-card").mouseenter(function(){$(".see-similar-static",this).addClass("see-similar-active")}).mouseleave(function(){$(".see-similar-static",this).removeClass("see-similar-active")});var t=function(){$(document).scrollTop()>window.innerHeight&&(jQuery(document).logEvent("home_below_fold",{}),$(window).unbind("scroll",t))};$(window).scroll(t)}),window.Etsy.loader.loaded("homepage/etsy.homepage-fold.20130816141227.js"),function(t,e){var i=[];t(".category_path").each(function(){i.push(t(this).val())});var n=[];if(t(".subcategory_path").each(function(){n.push(t(this).val())}),i.length>0){var s={php_event_name:"browse_promos",category_paths:i,subcategory_paths:n};t(function(){e.EventLogger.logEvent(s)})}}(jQuery,window.Etsy),window.Etsy.loader.loaded("homepage/etsy.browse-promos.20130816141227.js"),function(t,e){var i=e("div#weddings");if(i){var n=e("#weddings-promo-event"),s=e("#weddings-promo-click-event");n.val()&&t.EventLogger.logEvent({php_event_name:n.val()}),i.hover(function(){e("#weddings-header-link").css("text-decoration","underline")},function(){e("#weddings-header-link").css("text-decoration","none")}),i.click(function(){window.location=e("#weddings-promo-url").val(),s.val()&&t.EventLogger.logEvent({php_event_name:s.val()})})}}(window.Etsy,jQuery),window.Etsy.loader.loaded("weddings.promo.20130816141227.js");